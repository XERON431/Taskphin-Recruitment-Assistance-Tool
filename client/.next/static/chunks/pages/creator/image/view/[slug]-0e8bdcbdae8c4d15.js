(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{2770:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/creator/image/view/[slug]",function(){return t(5281)}])},7582:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var i=t(5893),r=t(7294),s=t(5121),n=t(1163),o=t(1664),c=()=>{let[e,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{a(window.location.pathname)},[window.location.pathname]),(0,i.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,i.jsx)(o,{href:"/creator",children:(0,i.jsx)("p",{className:"nav-link ".concat("/creator"==e&&"active"),children:"Dashboard"})}),(0,i.jsx)(o,{href:"/creator/image/create",children:(0,i.jsx)("p",{className:"nav-link ".concat("/creator/image/create"==e&&"active"),children:"Add Candidate"})})]})},l=e=>{let{children:a}=e,[t,o]=(0,r.useState)(!1),l=(0,n.useRouter)();(0,r.useEffect)(()=>{console.log("this useeffect worked"),d()},[]);let d=async()=>{try{console.log("oh my god");let{data:e}=await s.Z.get("/api/current-creator");console.log("woah "),console.log(e),e.ok||o(!0)}catch(e){console.log("yeah error is here"),console.log(e),o(!1),l.push("/")}};return(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)(c,{})}),(0,i.jsx)("div",{className:"col-md-10",children:a})]})}):(0,i.jsx)("h1",{children:"error"})})}},5281:function(e,a,t){"use strict";t.r(a);var i=t(5893),r=t(7294),s=t(1163),n=t(7582),o=t(5121),c=t(8862),l=t(4274),d=t(6150),u=t(8456),h=t(2920),m=t(8462);a.default=()=>{let[e,a]=(0,r.useState)({}),[t,g]=(0,r.useState)(!1),f=(0,s.useRouter)(),{slug:x}=f.query,{state:{user:p}}=(0,r.useContext)(m._);(0,r.useEffect)(()=>{y()},[x]);let y=async()=>{try{g(!0);let{data:e}=await o.Z.get("/api/image/".concat(x));a(e),g(!1)}catch(e){console.error("Error loading image:",e),g(!1)}},j=async e=>{try{if(!window.confirm("Are you sure you want to publish? It will be live."))return;g(!0);let{data:t}=await o.Z.put("/api/image/publish/".concat(e));a(t),g(!1),(0,h.Am)("Congratulations! Your Candidate is live!")}catch(e){console.error("Error publishing candidate:",e),g(!1),(0,h.Am)("Image publish failed. Try again.")}},b=async e=>{try{if(!window.confirm("Are you sure you want to unpublish?"))return;g(!0);let{data:t}=await o.Z.put("/api/image/unpublish/".concat(e));a(t),g(!1),(0,h.Am)("Candidate is taken down from showcase!")}catch(e){console.error("Error unpublishing image:",e),g(!1),(0,h.Am)("Image unpublish failed. Try again.")}},w=async e=>{try{if(!window.confirm("Are you sure you want to delete this image?"))return;g(!0),await o.Z.delete("/api/image/".concat(e)),g(!1),(0,h.Am)("Image deleted successfully."),f.push("/")}catch(e){console.error("Error deleting image:",e),g(!1),(0,h.Am)("Image deletion failed. Try again.")}};return(0,i.jsx)(n.Z,{children:(0,i.jsx)("div",{className:"container-fluid pt-3",children:e&&(0,i.jsxs)("div",{style:{textAlign:"center",background:"#000000",color:"#fff",padding:"20px"},children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col-md-8 p-4",children:[(0,i.jsx)(c.Z,{variant:"h1",className:"font-weight-bold",style:{color:"pink"},children:e.name}),(0,i.jsxs)("div",{className:"mt-2",children:[e.category&&(0,i.jsx)(l.Z,{label:e.category,style:{backgroundColor:"#03a9f4",color:"#fff",marginRight:"4px"}}),e.currentStatus&&(0,i.jsx)(l.Z,{label:e.currentStatus,style:{backgroundColor:"#ff0000",color:"#fff",marginRight:"4px"}}),e.phone&&(0,i.jsx)(l.Z,{label:e.phone,style:{backgroundColor:"green",color:"#fff",marginRight:"4px"}}),e.email&&(0,i.jsx)(l.Z,{label:e.email,style:{backgroundColor:"violet",color:"white",marginRight:"4px"}})]}),(0,i.jsx)("hr",{}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsxs)(c.Z,{variant:"body1",style:{color:"white"},children:[e.description&&e.description.substring(1,160),"..."]}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)(d.Z,{className:"mb-3 m-3",variant:"contained",color:"secondary",disabled:t,onClick:()=>{f.push("/creator/image/edit/".concat(x))},children:(0,i.jsx)(c.Z,{variant:"button",style:{color:"white"},children:"Update status"})}),e.published?(0,i.jsx)(d.Z,{className:"mb-3 m-3",variant:"contained",color:"secondary",disabled:t,onClick:()=>b(e.id),children:(0,i.jsx)(c.Z,{variant:"button",style:{color:"white"},children:"Unpublish"})}):(0,i.jsx)(d.Z,{className:"mb-3 m-3",variant:"contained",color:"secondary",disabled:t,onClick:()=>j(e.id),children:(0,i.jsx)(c.Z,{variant:"button",style:{color:"white"},children:"Publish"})}),(0,i.jsx)(d.Z,{className:"mb-3 m-3",variant:"contained",color:"secondary",disabled:t,onClick:()=>w(e.id),children:(0,i.jsx)(c.Z,{variant:"button",style:{color:"white"},children:"Delete"})})]})]}),(0,i.jsxs)("div",{className:"col-md-4 p-4",children:[(0,i.jsx)("img",{src:e.image?e.image.Location:"/1-8.jpg",alt:e.name,className:"card-img-top",style:{height:"500px",objectFit:"cover"}}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between"}})]})]}),t&&(0,i.jsx)("div",{className:"d-flex justify-content-center",children:(0,i.jsx)(u.Z,{color:"secondary"})})]})})})}}},function(e){e.O(0,[92,900,774,888,179],function(){return e(e.s=2770)}),_N_E=e.O()}]);