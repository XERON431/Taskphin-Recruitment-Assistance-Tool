(()=>{var e={};e.id=433,e.ids=[433,888,660],e.modules={4674:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>h,default:()=>p,getServerSideProps:()=>m,getStaticPaths:()=>x,getStaticProps:()=>g,reportWebVitals:()=>f,routeModule:()=>S,unstable_getServerProps:()=>b,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>y});var a=s(7093),i=s(5244),o=s(1323),n=s(5388),l=s.n(n),c=s(2406),u=s(3881),d=e([c,u]);[c,u]=d.then?(await d)():d;let p=(0,o.l)(u,"default"),g=(0,o.l)(u,"getStaticProps"),x=(0,o.l)(u,"getStaticPaths"),m=(0,o.l)(u,"getServerSideProps"),h=(0,o.l)(u,"config"),f=(0,o.l)(u,"reportWebVitals"),y=(0,o.l)(u,"unstable_getStaticProps"),j=(0,o.l)(u,"unstable_getStaticPaths"),v=(0,o.l)(u,"unstable_getStaticParams"),b=(0,o.l)(u,"unstable_getServerProps"),w=(0,o.l)(u,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/image/[slug]",pathname:"/image/[slug]",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:u});r()}catch(e){r(e)}})},8163:()=>{},7197:e=>{"use strict";e.exports=require("@fortawesome/react-fontawesome")},9295:e=>{"use strict";e.exports=require("@mui/base/composeClasses")},7986:e=>{"use strict";e.exports=require("@mui/system")},657:e=>{"use strict";e.exports=require("@mui/utils")},1416:e=>{"use strict";e.exports=require("@mui/utils/formatMuiErrorMessage")},1392:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClass")},2558:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClasses")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1037:e=>{"use strict";e.exports=require("prop-types")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},4466:e=>{"use strict";e.exports=require("react-transition-group")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4563:e=>{"use strict";e.exports=import("@fortawesome/free-solid-svg-icons")},9648:e=>{"use strict";e.exports=import("axios")},3590:e=>{"use strict";e.exports=import("react-toastify")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")},528:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>h});var a=s(997),i=s(6689),o=s(1664),n=s(1163),l=s(7197),c=s(4563),u=s(8462),d=s(9648),p=s(3590);s(7986);var g=e([c,u,d,p]);[c,u,d,p]=g.then?(await g)():g;let x={display:"inline-flex",alignItems:"center",padding:"8px 20px",color:"black",textDecoration:"none",cursor:"pointer"},m={...x,color:"blue",borderBottom:"2px solid blue"},h=()=>{let e=(0,n.useRouter)(),[t,s]=(0,i.useState)(null),{state:r,dispatch:g}=(0,i.useContext)(u._),[h,f]=(0,i.useState)(!1),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{s(e.pathname)},[e.pathname]);let j=async()=>{g({type:"LOGOUT"}),window.localStorage.removeItem("user");try{let{data:t}=await d.default.get("/api/logout");(0,p.toast)(t.message,{autoClose:1e3}),e.push("/login")}catch(e){console.error("Logout error:",e)}},v=()=>{f(!1)};(0,i.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&v()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let b="/user"==e.pathname;return(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{children:[!r.user&&a.jsx(o,{href:"/candidate",children:(0,a.jsxs)("p",{style:"/candidate"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faHome,style:{marginRight:"5px"}}),"Register as Candidate"]})}),a.jsx(o,{href:"/",children:(0,a.jsxs)("p",{style:"/"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faHome,style:{marginRight:"5px"}}),"Global Candidate Showcase"]})}),r.user&&a.jsx(o,{href:"/newcandidates",children:(0,a.jsxs)("p",{style:"/newcandidates"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faHome,style:{marginRight:"5px"}}),"New Registered Candidates"]})}),r.user&&a.jsx(o,{href:"/creator/image/create",children:a.jsx("p",{style:"/creator/image/create"==t?m:x,children:(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.FontAwesomeIcon,{icon:c.faChalkboardTeacher,style:{marginRight:"5px"}}),"Add Candidate"]})})}),r.user&&a.jsx(o,{href:"/creator",children:(0,a.jsxs)("p",{style:"/creator"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faChalkboardTeacher,style:{marginRight:"5px"}}),"Candidate Management"]})})]}),(0,a.jsxs)("div",{style:{position:"relative"},children:[r.user&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{style:{...x,cursor:"pointer",marginRight:"5px",...b&&m},onClick:()=>{f(!h)},children:[a.jsx(l.FontAwesomeIcon,{icon:c.faUser,style:{marginRight:"5px"}}),a.jsx("div",{className:"text-black",children:r.user.name})]}),h&&(0,a.jsxs)("div",{ref:y,style:{position:"absolute",top:"100%",right:0,background:"#ffffff",border:"1px solid #ccc",boxShadow:"0px 8px 16px 0px rgba(0,0,0,0.2)",borderRadius:"4px",zIndex:1},children:[a.jsx(o,{href:"/user",children:(0,a.jsxs)("p",{style:{...x,padding:"8px 20px",cursor:"pointer",margin:"0"},onClick:v,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faHome,style:{marginRight:"5px"}}),"Dashboard"]})}),(0,a.jsxs)("p",{style:{...x,padding:"8px 20px",cursor:"pointer",margin:"0"},onClick:()=>{j(),v()},children:[a.jsx(l.FontAwesomeIcon,{icon:c.faSignOutAlt,style:{marginRight:"5px"}}),"Logout"]})]})]}),!r.user&&(0,a.jsxs)("div",{children:[a.jsx(o,{href:"/login",children:(0,a.jsxs)("p",{style:"/login"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faSignInAlt,style:{marginRight:"5px"}}),"Login"]})}),a.jsx(o,{href:"/register",children:(0,a.jsxs)("p",{style:"/register"==t?m:x,children:[a.jsx(l.FontAwesomeIcon,{icon:c.faUserPlus,style:{marginRight:"5px"}}),"Register"]})})]})]})]})};r()}catch(e){r(e)}})},6192:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(997),a=s(4904),i=s(9972),o=s(3674),n=s(6096);let l=({image:e,user:t,loading:s,handleFreeEnrollment:l,enrolled:c,handleDelete:u})=>r.jsx("div",{style:{textAlign:"center",background:"#000000",color:"#fff",padding:"20px"},children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-md-8 p-4",children:[r.jsx(a,{variant:"h1",className:"font-weight-bold",style:{color:"pink"},children:e.name}),e.category&&r.jsx(i,{label:e.category,style:{backgroundColor:"#03a9f4",color:"#fff",marginRight:"4px"},className:"mr-10"}),e.currentStatus&&r.jsx(i,{label:e.currentStatus,style:{backgroundColor:"#ff0000",color:"#fff",marginRight:"4px"},className:"mr-10"}),e.phone&&r.jsx(i,{label:e.phone,style:{backgroundColor:"green",color:"#fff",marginRight:"4px"},className:"mr-10"}),e.email&&r.jsx(i,{label:e.email,style:{backgroundColor:"violet",color:"white",marginRight:"4px"},className:"mr-10"}),r.jsx("br",{}),r.jsx("br",{}),(0,r.jsxs)(a,{variant:"body1",style:{color:"white"},children:[e.description&&e.description.substring(1,160),"..."]}),s?r.jsx("div",{className:"d-flex justify-content-center",children:r.jsx(o,{color:"secondary"})}):(0,r.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[" ",r.jsx(n,{className:"mb-3 mt-3",variant:"contained",color:"secondary",fullWidth:!0,disabled:s,onClick:l,children:r.jsx(a,{variant:"button",style:{color:"white"},children:t?c.status?"Saved":"Save":"Login to save"})}),r.jsx(n,{className:"mb-3 mt-3",variant:"contained",color:"secondary",fullWidth:!0,disabled:s,onClick:u,children:r.jsx(a,{variant:"button",style:{color:"white"},children:"Delete"})})]})]}),(0,r.jsxs)("div",{className:"col-md-4 p-4",children:[r.jsx("img",{src:e.image.Location,alt:e.name,className:"card-img-top",style:{height:"500px",objectFit:"cover"}}),r.jsx("hr",{})]})]})})},8462:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{_:()=>u,z:()=>p});var a=s(997),i=s(6689),o=s(9648),n=s(1163),l=e([o]);o=(l.then?(await l)():l)[0];let c={user:null},u=(0,i.createContext)(),d=(e,t)=>{switch(t.type){case"LOGIN":return{...e,user:t.payload};case"LOGOUT":return{...e,user:null};default:return e}},p=({children:e})=>{let[t,s]=(0,i.useReducer)(d,c),r=(0,n.useRouter)();return(0,i.useEffect)(()=>{s({type:"LOGIN",payload:JSON.parse(window.localStorage.getItem("user"))})},[]),o.default.interceptors.response.use(function(e){return e},function(e){let t=e.response;return 401==t.status&&t.config&&!t.config.__isRetryRequest?new Promise((t,a)=>{o.default.get("/api/logout").then(e=>{console.log("/401 error > logout"),s({type:"LOGOUT"}),window.localStorage.removeItem("user"),r.push("/login")}).catch(t=>{console.log("AXIOS INTERCEPTORS ERR",t),a(e)})}):Promise.reject(e)}),(0,i.useEffect)(()=>{(async()=>{let{data:e}=await o.default.get("/api/csrf-token");o.default.defaults.headers["X-CSRF-Token"]=e.csrfToken})()},[]),a.jsx(u.Provider,{value:{state:t,dispatch:s},children:e})};r()}catch(e){r(e)}})},2406:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>c});var a=s(997);s(9090),s(8163);var i=s(528),o=s(3590);s(8819);var n=s(8462),l=e([i,o,n]);[i,o,n]=l.then?(await l)():l;let c=function({Component:e,pageProps:t}){return(0,a.jsxs)(n.z,{children:[a.jsx(o.ToastContainer,{position:"top-center"}),a.jsx(i.Z,{}),a.jsx(e,{...t})]})};r()}catch(e){r(e)}})},3881:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>g,getServerSideProps:()=>p});var a=s(997),i=s(9648),o=s(1163),n=s(6192),l=s(6689),c=s(8462),u=s(3590),d=e([i,c,u]);async function p({query:e}){try{let{data:t}=await i.default.get(`http://localhost:3000/api/image/${e.slug}`);return{props:{image:t}}}catch(e){return console.log("Error fetching image:",e),{props:{image:null}}}}[i,c,u]=d.then?(await d)():d;let g=({image:e})=>{let t=(0,o.useRouter)(),{slug:s}=t.query,[r,d]=(0,l.useState)(!1),[p,g]=(0,l.useState)({}),{state:{user:x}}=(0,l.useContext)(c._);(0,l.useEffect)(()=>{x&&e&&m()},[x,e]);let m=async()=>{let{data:t}=await i.default.get(`/api/check-enrollment/${e.id}`);g(t)},h=async s=>{s.preventDefault();try{if(x||t.push("/login"),p.status)return t.push(`/user/image/${p.image.slug}`);d(!0);let{data:s}=await i.default.post(`/api/free-enrollment/${e.id}`);(0,u.toast)(s.message),d(!1),g(s)}catch(e){(0,u.toast)("Saving failed"),console.log(e),d(!1)}},f=async()=>{try{let{data:s}=await i.default.delete(`/api/image/${e.id}`);(0,u.toast)(s.message),t.push("/")}catch(e){console.error("Error deleting image:",e),(0,u.toast)("Error deleting candidate")}};return a.jsx(a.Fragment,{children:a.jsx(n.Z,{image:e,user:x,loading:r,handleFreeEnrollment:h,enrolled:p,setEnrolled:g,handleDelete:f})})};r()}catch(e){r(e)}})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[491,783,388,607,987],()=>s(4674));module.exports=r})();